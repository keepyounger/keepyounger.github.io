<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript" src="base64.js"></script>
    <script type="text/ecmascript" src="md5.js"></script>
</head>
<a id="downloadVPN" target="_blank">点击此处手动下载vpn文件</a>
<script type="text/javascript">
    function downloadFile(fileName, content){
        var aLink = document.getElementById('downloadVPN');
        var blob = new Blob([content], {type: "application/javascript"});
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent("click", true, false);//initEvent 不加后两个参数在FF下会报错, 感谢 Barret Lee 的反馈
        aLink.download = fileName;
        aLink.href = URL.createObjectURL(blob);
        aLink.dispatchEvent(evt);
    }

    function downloadFile2(aLink, fileName, content){
        aLink.download = fileName;
        aLink.href = "data:text/plain," + content;
    }

    var timestamp = Date.parse(new Date());
    var imei = '460016885413505';
    var time = timestamp.toString().substring(0,timestamp.toString().length-5);
    var str3 = time+'_'+imei;
    var content = imei+'|'+time+'|'+hex_md5(str3).toUpperCase();
    var b = new Base64();
    var base64Content = b.encode(content);
    var first = base64Content.substring(0, base64Content.length-16);
    var last = base64Content.substring(first.length-16, 16);

    var s1 = 'setenv IV_GUI_VER \"de.blinkt.openvpn 0.6.17\" \nmachine-readable-output\nclient\ndev tun\nproto tcp\nconnect-retry-max 5\nconnect-retry 5\nresolv-retry 60\n########\u514D\u6D41\u4EE3\u7801########\nremote 101.201.68.117 443\nhttp-proxy-option EXT1 \"User-Agent: Mozilla/5.0 (Linux; Android 4.4.2; vivo Y18L Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/';
    var s3 = '\"\nhttp-proxy-option EXT1 \"Proxy-Connection: keep-alive\"\nhttp-proxy 140.207.47.119 28080\n########\u514D\u6D41\u4EE3\u7801########\n\nresolv-retry infinite\nnobind\npersist-key\npersist-tun\n#push route 114.114.114.144 114.114.115.115\n\n<ca>\n-----BEGIN CERTIFICATE-----\nMIIEoTCCA4mgAwIBAgIJAKJBcgdUpv7LMA0GCSqGSIb3DQEBCwUAMIGRMQswCQYD\nVQQGEwJDTjEOMAwGA1UECBMFSGVOYW4xEjAQBgNVBAcTCVpoZW5nWmhvdTENMAsG\nA1UEChMENTJtbDEMMAoGA1UECxMDVlBOMRAwDgYDVQQDEwc1Mm1sIENBMRAwDgYD\nVQQpEwdPcGVuVlBOMR0wGwYJKoZIhvcNAQkBFg5BZG1pbkA1Mm1sLm9yZzAeFw0x\nNjA4MTQwNTM3MjBaFw0yNjA4MTIwNTM3MjBaMIGRMQswCQYDVQQGEwJDTjEOMAwG\nA1UECBMFSGVOYW4xEjAQBgNVBAcTCVpoZW5nWmhvdTENMAsGA1UEChMENTJtbDEM\nMAoGA1UECxMDVlBOMRAwDgYDVQQDEwc1Mm1sIENBMRAwDgYDVQQpEwdPcGVuVlBO\nMR0wGwYJKoZIhvcNAQkBFg5BZG1pbkA1Mm1sLm9yZzCCASIwDQYJKoZIhvcNAQEB\nBQADggEPADCCAQoCggEBAMJ23IsFewwvLrzeyS0S/E/tZeXlJ2xsvD/GgIxn7o5C\nSeirlxSRZ0OEqQgnqE/WEqVZsdXmHOValuhVVq6wYrgdUSG4XXBmwZHLQ4czxbIo\nAqzHzN8W4U7rXtQaf54hvAaR/I7eFLPgI7X6W2OI/+eqMsYtzb1474c2ixeeNdEP\njzJU9T9uG3Qf6LamSLT71kg4vztLGc4brXXMo8au+DUV0HYNMFZG7ln3uLoeWNFM\njVq7+cJ4GGY7cRFhzGiBy950lwsvTntaa/Rr/67VQ880y3fhsDepgbe5RTUA4piK\nHREJbVAdPBa97Y2BrmU4tgVN/Hmkcq8bReDl2MkspecCAwEAAaOB+TCB9jAdBgNV\nHQ4EFgQUgOIawwKjtPCIU46lCGREoBum35swgcYGA1UdIwSBvjCBu4AUgOIawwKj\ntPCIU46lCGREoBum35uhgZekgZQwgZExCzAJBgNVBAYTAkNOMQ4wDAYDVQQIEwVI\nZU5hbjESMBAGA1UEBxMJWmhlbmdaaG91MQ0wCwYDVQQKEwQ1Mm1sMQwwCgYDVQQL\nEwNWUE4xEDAOBgNVBAMTBzUybWwgQ0ExEDAOBgNVBCkTB09wZW5WUE4xHTAbBgkq\nhkiG9w0BCQEWDkFkbWluQDUybWwub3JnggkAokFyB1Sm/sswDAYDVR0TBAUwAwEB\n/zANBgkqhkiG9w0BAQsFAAOCAQEAZbG9TMwv6zKf/5pIjxZSx/R5OXmnUmNLKEFv\nLVg5UMswDN40tetkP0k7TAOTFNWAj/qtTDUt0+A6gqW98bHoREZtRMbHYuE2JjfW\nrfaqEjoL9QrKKakV0hLLzvGxuUK2dKX89P03oUnr8p448qlpGETx8WxQdzGYj4pA\nYc27KtYggaUl/0hEXeg4Pf+JDsBPNkqqnscPIUp2v1qGkJulc/E1duW8hnavl/zq\nGf0R9DjEjdk1zuukO6tARJVtRw6iV1zWWHRfXk9I6RXUf2+38hi/400P9Z2yi6m1\nH9XODYywgLBX66ZzRWCwnxTKrgKC2dICe/G35UEMI0g07Mlofw==\n-----END CERTIFICATE-----\n</ca>\nkey-direction 1\n<tls-auth>\n#\n# 2048 bit OpenVPN static key\n#\n-----BEGIN OpenVPN Static key V1-----\n99b6291d289cc88667d20bdaeef07d75\n0fe2f1d2623b7cd4ecfb4dabb47dd104\neff10f5d400ad5d30500852976355d9d\n7a39b1596ab1261d82fb4751bbde8a8f\nffec99c70a850d4d32b90ec5a9081d91\n5f482b12569dafb6d4717ecc9343033b\n56f65f29cb422095dfc6563b99d95373\nd70b3ab0a9d1e25d835344a297b981a0\n0d6d98a5e6fd1a5eb6872a73cc5b7d7d\n35f046f8189e7429806d53e95b9729ae\nb4a658a9330f624c41fa6bb5615c748e\nc9957f4a3a45477281e933fa81ecf404\n577dea24d144ff5b28309d827401a692\n5d62d97df70e73c442c979e61942ec98\n01dab6d69037cebf7b94bc0c2f8543b2\n9a3734ff3e93acb7430ae5b5a38869d9\n-----END OpenVPN Static key V1-----\n</tls-auth>\nauth-user-pass\nns-cert-type server\ncomp-lzo\nverb 3';
    var vpn = s1+first+" "+last+s3;
    downloadFile('1.ovpn', vpn);
    // downloadFile2(document.getElementById('downloadVPN'),'1.ovpn', vpn);

</script>
<body>
</body>
</html>